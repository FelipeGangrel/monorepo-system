import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-CXcpQZ5J.js";import{c as N,a as h,u as p}from"./index-CiRIfjw3.js";import{P as m}from"./index-Yg3aDjnU.js";import{c as f}from"./utils-Dec1Exbm.js";var v="Avatar",[R,T]=N(v),[_,A]=R(v),x=s.forwardRef((a,e)=>{const{__scopeAvatar:r,...t}=a,[n,o]=s.useState("idle");return i.jsx(_,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:o,children:i.jsx(m.span,{...t,ref:e})})});x.displayName=v;var w="AvatarImage",S=s.forwardRef((a,e)=>{const{__scopeAvatar:r,src:t,onLoadingStatusChange:n=()=>{},...o}=a,l=A(w,r),c=j(t,o.referrerPolicy),u=h(g=>{n(g),l.onImageLoadingStatusChange(g)});return p(()=>{c!=="idle"&&u(c)},[c,u]),c==="loaded"?i.jsx(m.img,{...o,ref:e,src:t}):null});S.displayName=w;var I="AvatarFallback",L=s.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:t,...n}=a,o=A(I,r),[l,c]=s.useState(t===void 0);return s.useEffect(()=>{if(t!==void 0){const u=window.setTimeout(()=>c(!0),t);return()=>window.clearTimeout(u)}},[t]),l&&o.imageLoadingStatus!=="loaded"?i.jsx(m.span,{...n,ref:e}):null});L.displayName=I;function j(a,e){const[r,t]=s.useState("idle");return p(()=>{if(!a){t("error");return}let n=!0;const o=new window.Image,l=c=>()=>{n&&t(c)};return t("loading"),o.onload=l("loaded"),o.onerror=l("error"),o.src=a,e&&(o.referrerPolicy=e),()=>{n=!1}},[a,e]),r}var y=x,C=S,b=L;const d=s.forwardRef(({className:a,...e},r)=>i.jsx(y,{ref:r,className:f("core-relative core-flex core-h-10 core-w-10 core-shrink-0 core-overflow-hidden core-rounded-full",a),...e}));d.displayName="Avatar";d.Image=s.forwardRef(({className:a,...e},r)=>i.jsx(C,{ref:r,className:f("core-aspect-square core-h-full core-w-full",a),...e}));d.Image.displayName="Avatar.Image";d.Fallback=s.forwardRef(({className:a,...e},r)=>i.jsx(b,{ref:r,className:f("core-flex core-h-full core-w-full core-items-center core-justify-center core-rounded-full core-bg-muted",a),...e}));d.Fallback.displayName="Avatar.Fallback";d.__docgenInfo={description:"",methods:[],displayName:"Avatar"};export{d as A};
