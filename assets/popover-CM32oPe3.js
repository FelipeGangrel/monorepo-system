import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./index-CXcpQZ5J.js";import{c as P}from"./index-DW48STyt.js";import{u as O}from"./index-Bd7YGvbB.js";import{c as $}from"./index-CiRIfjw3.js";import{D as K}from"./index-DAer1WYL.js";import{h as U,R as V,u as W,F as Z,P as q}from"./index-D_Yx1edV.js";import{u as B}from"./index-CwgaEOf9.js";import{c as w,R as J,A as _,C as Q,a as X}from"./index-Lbo4_nNx.js";import{P as N}from"./index-C1fyEfKG.js";import{P as j}from"./index-Yg3aDjnU.js";import{S as Y}from"./index-B97ZzoEQ.js";import{u as ee}from"./index-DTz3VF55.js";import{c as E}from"./utils-Dec1Exbm.js";var R="Popover",[b,Ee]=$(R,[w]),g=w(),[oe,f]=b(R),y=e=>{const{__scopePopover:n,children:o,open:a,defaultOpen:r,onOpenChange:t,modal:s=!1}=e,p=g(n),u=i.useRef(null),[d,h]=i.useState(!1),[C=!1,v]=ee({prop:a,defaultProp:r,onChange:t});return c.jsx(J,{...p,children:c.jsx(oe,{scope:n,contentId:B(),triggerRef:u,open:C,onOpenChange:v,onOpenToggle:i.useCallback(()=>v(x=>!x),[v]),hasCustomAnchor:d,onCustomAnchorAdd:i.useCallback(()=>h(!0),[]),onCustomAnchorRemove:i.useCallback(()=>h(!1),[]),modal:s,children:o})})};y.displayName=R;var F="PopoverAnchor",S=i.forwardRef((e,n)=>{const{__scopePopover:o,...a}=e,r=f(F,o),t=g(o),{onCustomAnchorAdd:s,onCustomAnchorRemove:p}=r;return i.useEffect(()=>(s(),()=>p()),[s,p]),c.jsx(_,{...t,...a,ref:n})});S.displayName=F;var D="PopoverTrigger",T=i.forwardRef((e,n)=>{const{__scopePopover:o,...a}=e,r=f(D,o),t=g(o),s=O(n,r.triggerRef),p=c.jsx(j.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":H(r.open),...a,ref:s,onClick:P(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?p:c.jsx(_,{asChild:!0,...t,children:p})});T.displayName=D;var A="PopoverPortal",[re,te]=b(A,{forceMount:void 0}),M=e=>{const{__scopePopover:n,forceMount:o,children:a,container:r}=e,t=f(A,n);return c.jsx(re,{scope:n,forceMount:o,children:c.jsx(N,{present:o||t.open,children:c.jsx(q,{asChild:!0,container:r,children:a})})})};M.displayName=A;var m="PopoverContent",k=i.forwardRef((e,n)=>{const o=te(m,e.__scopePopover),{forceMount:a=o.forceMount,...r}=e,t=f(m,e.__scopePopover);return c.jsx(N,{present:a||t.open,children:t.modal?c.jsx(ne,{...r,ref:n}):c.jsx(ae,{...r,ref:n})})});k.displayName=m;var ne=i.forwardRef((e,n)=>{const o=f(m,e.__scopePopover),a=i.useRef(null),r=O(n,a),t=i.useRef(!1);return i.useEffect(()=>{const s=a.current;if(s)return U(s)},[]),c.jsx(V,{as:Y,allowPinchZoom:!0,children:c.jsx(I,{...e,ref:r,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:P(e.onCloseAutoFocus,s=>{var p;s.preventDefault(),t.current||(p=o.triggerRef.current)==null||p.focus()}),onPointerDownOutside:P(e.onPointerDownOutside,s=>{const p=s.detail.originalEvent,u=p.button===0&&p.ctrlKey===!0,d=p.button===2||u;t.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:P(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),ae=i.forwardRef((e,n)=>{const o=f(m,e.__scopePopover),a=i.useRef(!1),r=i.useRef(!1);return c.jsx(I,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,p;(s=e.onCloseAutoFocus)==null||s.call(e,t),t.defaultPrevented||(a.current||(p=o.triggerRef.current)==null||p.focus(),t.preventDefault()),a.current=!1,r.current=!1},onInteractOutside:t=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,t),t.defaultPrevented||(a.current=!0,t.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const s=t.target;((d=o.triggerRef.current)==null?void 0:d.contains(s))&&t.preventDefault(),t.detail.originalEvent.type==="focusin"&&r.current&&t.preventDefault()}})}),I=i.forwardRef((e,n)=>{const{__scopePopover:o,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:t,disableOutsidePointerEvents:s,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...C}=e,v=f(m,o),x=g(o);return W(),c.jsx(Z,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:t,children:c.jsx(K,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:h,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>v.onOpenChange(!1),children:c.jsx(Q,{"data-state":H(v.open),role:"dialog",id:v.contentId,...x,...C,ref:n,style:{...C.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),L="PopoverClose",z=i.forwardRef((e,n)=>{const{__scopePopover:o,...a}=e,r=f(L,o);return c.jsx(j.button,{type:"button",...a,ref:n,onClick:P(e.onClick,()=>r.onOpenChange(!1))})});z.displayName=L;var se="PopoverArrow",G=i.forwardRef((e,n)=>{const{__scopePopover:o,...a}=e,r=g(o);return c.jsx(X,{...r,...a,ref:n})});G.displayName=se;function H(e){return e?"open":"closed"}var ce=y,ie=S,pe=T,le=M,ue=k,de=z,fe=G;const l=ce;l.displayName="Popover";l.Trigger=pe;l.Trigger.displayName="Popover.Trigger";l.Anchor=ie;l.Anchor.displayName="Popover.Anchor";l.Arrow=i.forwardRef(({className:e,...n},o)=>c.jsx(fe,{ref:o,className:E("core-fill-popover",e),...n}));l.Arrow.displayName="Popover.Arrow";l.Close=de;l.Close.displayName="Popover.Close";l.Content=i.forwardRef(({className:e,align:n="center",sideOffset:o=4,...a},r)=>c.jsx(le,{children:c.jsx(ue,{ref:r,align:n,sideOffset:o,className:E("core-z-50 core-w-72 core-rounded-md core-border core-bg-popover core-p-4 core-text-popover-foreground core-shadow-md core-outline-none data-[state=open]:core-animate-in data-[state=closed]:core-animate-out data-[state=closed]:core-fade-out-0 data-[state=open]:core-fade-in-0 data-[state=closed]:core-zoom-out-95 data-[state=open]:core-zoom-in-95 data-[side=bottom]:core-slide-in-from-top-2 data-[side=left]:core-slide-in-from-right-2 data-[side=right]:core-slide-in-from-left-2 data-[side=top]:core-slide-in-from-bottom-2",e),...a})}));l.Content.displayName="Popover.Content";export{l as P};
